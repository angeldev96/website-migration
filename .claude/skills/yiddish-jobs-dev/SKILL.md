---
name: yiddish-jobs-dev
description: Expert developer skills for the Yiddish Jobs platform. Use when building or modifying Next.js components, API routes, Prisma models, or working with job data and Yiddish localization.
---

# Yiddish Jobs Platform Developer Skill

This skill provides specialized knowledge for developing and maintaining the Yiddish Jobs website, a Next.js 15 application using Prisma and PostgreSQL.

## Core Tech Stack
- **Framework**: Next.js 15 (App Router)
- **Runtime**: Node.js or Bun (recommended)
- **Database**: PostgreSQL (hosted on Railway)
- **ORM**: Prisma 6.x
- **Styling**: Tailwind CSS 4
- **Deployment**: Cloudflare Pages (via OpenNext)
- **Authentication**: JWT-based via cookies

## Key Project Patterns

### 1. Database Access
Always use the Prisma singleton from `src/lib/prisma.js`:
```javascript
import prisma from '@/lib/prisma';
```

### 2. Job Data Model (`JobsSheet`)
The primary model is `JobsSheet`. Key fields to remember:
- `jobTitle` / `description`: Standard fields.
- `titleYiddish` / `descriptionYiddish`: For localized content.
- `aiTitle` / `aiDescription`: Enhanced content generated by LLMs.
- `status`: Use `PENDING`, `APPROVED`, `REJECTED`, etc.
- `genderCategory`: Filtering by gender is common in this niche.

### 3. API Route Structure
Follow the standard established in `src/app/api/`:
- Public routes: `api/jobs`, `api/categories`, `api/search`.
- Auth routes: `api/auth/login`, `api/auth/me`.
- Protected routes: Use `getCurrentUser()` from `src/lib/auth.js`.

### 4. Component Standards
- Place reusable components in `src/components/`.
- Use `lucide-react` for icons.
- Use Tailwind 4 utility classes for styling.
- Ensure responsive design (mobile-first).

## Common Tasks Guidance

### Adding a New API Endpoint
1. Create the directory in `src/app/api/[feature]/route.js`.
2. Export `GET`, `POST`, etc. functions.
3. Use `NextResponse.json()` for returns.
4. Error handling: Wrap in `try-catch` and return appropriate status codes.

### Modifying the Database
1. Update `prisma/schema.prisma`.
2. Run `npx prisma generate`.
3. If changing live DB structure, ensure Railway environment matches.
4. Update `scripts/test-db.js` if necessary to verify changes.

### Implementing Search & Filtering
Refer to `src/app/api/search/route.js` for complex filtering patterns involving `OR` conditions and case-insensitive Prisma filtering:
```javascript
where: {
  OR: [
    { jobTitle: { contains: query, mode: 'insensitive' } },
    { company: { contains: query, mode: 'insensitive' } }
  ]
}
```

## Yiddish Localization
- The platform supports Yiddish content. When adding new fields to jobs or pages, consider if a Yiddish counterpart is needed.
- Use the `titleYiddish` and `descriptionYiddish` fields from the `JobsSheet` model when displaying job details.

## Reference Documentation
- [docs/API.md](docs/API.md) - Full API endpoint documentation.
- [docs/SETUP_COMPLETE.md](docs/SETUP_COMPLETE.md) - Project overview and backend details.
- [prisma/schema.prisma](prisma/schema.prisma) - Complete data model.
